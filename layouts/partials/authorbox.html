{{- if .Param "authorbox" }}
{{- $author := index .Site.Data.authors (.Params.author | default .Site.Author.code) -}}
<div class="author authorbox">
    {{- with $author.name }}<div class="author-name">{{ . }}</div>{{ end }}
    <div class="author-avatar-wrapper">
      {{- if $author.gravatar }}
      {{- if in $author.gravatar "@" }}
      {{- $hash := trim $author.gravatar " " | lower | md5 }}
      <a href="https://www.gravatar.com/{{ $hash }}">
        <div style="background-image: url(https://www.gravatar.com/avatar/{{ $hash }}.jpg?s=150);" class="author-avatar"></div>
      </a>
      {{- else }}
      <a href="https://www.gravatar.com/{{ $author.gravatar }}">
        <div style="background-image: url(https://www.gravatar.com/avatar/{{ $author.gravatar }}.jpg?s=150);" class="author-avatar"></div>
      </a>
      {{- end }}
      {{- else if $author.avatar }}
      <div style="background-image: url({{ $author.avatar }});" class="author-avatar"></div>
      {{- else }}
      <div class="author-avatar"></div>
      {{- end }}
    </div>
</div>
{{- end }}